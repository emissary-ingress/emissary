---
apiVersion: getambassador.io/v1
kind: Mapping
metadata:
  name: filter-actions-on-mapping
  namespace: standalone
spec:
  prefix: /filter-actions/on/
  rewrite: /
  service: httpbin.org:80
  host_rewrite: httpbin.org
  timeout_ms: 5000
---
apiVersion: getambassador.io/v1beta2
kind: FilterPolicy
metadata:
  name: filter-actions-on-policy
  namespace: standalone
spec:
  rules:
  - host: "*"
    path: /filter-actions/on/*
    filters:
     - name: jwt-filter
       onResponse: continue
       onRequestModification: break
     - name: uaa


---
apiVersion: getambassador.io/v1
kind: Mapping
metadata:
  name: filter-actions-if-mapping
  namespace: standalone
spec:
  prefix: /filter-actions/if/
  rewrite: /
  service: httpbin.org:80
  host_rewrite: httpbin.org
  timeout_ms: 5000
---
apiVersion: getambassador.io/v1beta2
kind: FilterPolicy
metadata:
  name: filter-actions-if-policy
  namespace: standalone
spec:
  rules:
  - host: "*"
    path: /filter-actions/if/*
    filters:
     - name: jwt-filter
       ifRequestHeader:
         name: "Authorization"
       onRequestModification: break
     - name: uaa
