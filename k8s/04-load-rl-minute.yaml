---
apiVersion: getambassador.io/v2
kind: Mapping
metadata:
  name: load-testing-rl-minute
spec:
  prefix: /load-testing/rl-minute/
  service: load-http-echo
  labels:
    ambassador:
      - request_label_group:
        - minute
---
apiVersion: v1
kind: Service
metadata:
  name: load-minute
spec:
  selector:
    app: load-http-echo
  ports:
  - port: 80
    name: http
    targetPort: http-api
---
apiVersion: getambassador.io/v2
kind: RateLimit
metadata:
  name: load-rl-minute
spec:
  domain: ambassador
  limits:
   - pattern: [{generic_key: minute}]
     rate: 30000
     unit: minute
