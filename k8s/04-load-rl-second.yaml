---
apiVersion: getambassador.io/v2
kind: Mapping
metadata:
  name: load-testing-rl-second
spec:
  prefix: /load-testing/rl-second/
  service: load-http-echo
  labels:
    ambassador:
      - request_label_group:
        - second
---
apiVersion: v1
kind: Service
metadata:
  name: load-second
  namespace: default
spec:
  selector:
    app: load-http-echo
  ports:
  - port: 80
    name: http
    targetPort: http-api
---
apiVersion: getambassador.io/v2
kind: RateLimit
metadata:
  name: second-rate-limit
  namespace: default
spec:
  domain: ambassador
  limits:
   - pattern: [{generic_key: second}]
     rate: 500
     unit: second
