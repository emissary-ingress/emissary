---
apiVersion: getambassador.io/v2
kind: Mapping
metadata:
  name: aes-backend-signup-beta
  namespace: metriton
spec:
  prefix: /beta/signup
  rewrite: /signup
  service: aes-backend-beta
---
apiVersion: getambassador.io/v2
kind: Mapping
metadata:
  name: aes-backend-download-beta
  namespace: metriton
spec:
  prefix: /beta/downloads
  rewrite: /downloads
  service: aes-backend-beta
---
apiVersion: getambassador.io/v2
kind: Mapping
metadata:
  name: aes-backend-domain-beta
  namespace: metriton
spec:
  prefix: /beta/register-domain
  rewrite: /register-domain
  service: aes-backend-beta
  timeout_ms: 30000 # This upstream API relies on AWS... which is not always reliably fast
---
apiVersion: getambassador.io/v2
kind: Mapping
metadata:
  name: grafana-beta
  namespace: metriton
spec:
  prefix: /beta/grafana
  rewrite: /beta/grafana
  service: grafana-beta.grafana:80
