---
apiVersion: getambassador.io/v1beta2
kind: FilterPolicy
metadata:
  name: httpbin-policy
  namespace: default
spec:
  # everything defaults to private; you can create rules to make stuff
  # public, and you can create rules to require additional scopes
  # which will be automatically checked
  rules:
    - host: "*"
      path: /httpbin/ip
      filters: null # make this path public
    - host: "*"
      path: /httpbin/user-agent
      filters:
      - name: auth0
    - host: "*"
      path: /httpbin/headers
      public: false
      filters:
      - name: auth0
    - host: "*"
      path: /auth0/httpbin/headers
      public: false
      filters:
      - name: auth0
    - host: "*"
      path: /keycloak/httpbin/headers
      public: false
      filters:
      - name: keycloak
    - host: "*"
      path: /okta/httpbin/headers
      filters:
        - name: okta
          arguments:
            scopes:
              - "openid"
              - "profile"
