<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ambassador - Getting Started</title>
  <meta name="description" content="Ambassador, API Gateway built on Envoy">
  <meta name="keywords" content="Ambassador, Envoy, Kubernetes, microservices">
  <meta name="author" content="Datawire.io">
  <meta name="generator" content="Doc42 0.1.0">

  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,600,700' type='text/css' media='all' />
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">
  <link rel="stylesheet" href="/css/kissui.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="stylesheet" href="/css/sticky.min.css">

  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');  ga('create', 'UA-57322503-8', 'auto');ga('send', 'pageview');</script>
  <link rel="canonical" href="http://localhost:4000/user-guide/getting-started.html">
  <link rel="alternate" type="application/rss+xml" title="Ambassador" href="http://localhost:4000/feed.xml">
</head>


  <body>
      <div class="row">
    <header id="main_header">
        <nav class="basic border menu">
            <div class="fluid">
                <a class="header item" href="/">
                    Ambassador
                </a>

                <a class="item" href="/user-guide/getting-started.html">
                  <i class="fa fa-download"></i> Get Started
                </a>
                <a class="item" href="/about/why-telepresence.html">
                  <i class="fa fa-book"></i> Documentation
                </a>
                <a class="item" href="https://github.com/datawire/telepresence/" target="_blank">
                    <i class="fa fa-github"></i> GitHub
                </a>
                <a class="item" href="https://gitter.im/datawire/telepresence" target="_blank">
                    <i class="fa fa-support"></i> Need help?
                </a>
            </div>
        </nav>
    </header>
</div>


      <div class="fluid">
          <div class="wrapper">
              <div class="row">
    <div class="two columns">
        <nav class="basic border fluid vertical menu" data-kui-sticky>
    

    <div class="items">
        <div class="icon item header">
            <i class="fa fa-question-circle"></i>about
        </div>
        

        
            
                      
            
                      
            
                      
            
                      
            
              
                      
                      
            
              
                      
                      
            
              
                
                      <a class="item" href="/about/why-telepresence.html">Why Telepresence?</a>
                      
                      
                      
                      
            
              
                      
                      
            
              
                      
                      
            
              
                
                      <a class="item" href="/about/how-it-works.html">How it works</a>
                      
                      
                      
                      
            
              
                      
                      
    </div>

    <div class="items">
        <div class="icon item header">
            <i class="fa fa-play"></i>getting started
        </div>
        

        
            
                      
            
                      
            
                      
            
                      
            
              
                      
                      
            
              
                      
                      
            
              
                      
                      
            
              
                      
                      
            
              
                      
                      
            
              
                      
                      
            
              
                      
                      
    </div>

    <div class="items">
        <div class="icon item header">
            <i class="fa fa-code"></i>user guide
        </div>
        

        
            
                      
            
                      
            
                      
            
                      
            
              
                      
                      
            
              
                
                      <a class="item" href="/user-guide/getting-started.html">Getting Started</a>
                      
                      
                      
                      
            
              
                      
                      
            
              
                
                      <a class="item" href="/user-guide/features-and-functionality.html">Features and Functionality</a>
                      
                      
                      
                      
            
              
                      
                      
            
              
                      
                      
            
              
                
                      <a class="item" href="/user-guide/limitations-and-workarounds.html">Limitations and Workarounds</a>
                      
                      
                      
                      
    </div>

    <div class="items">
        <div class="icon item header">
            <i class="fa fa-expand"></i>additional information
        </div>
        

        
            
                      
            
                      
            
                      
            
                      
            
              
                
                      <a class="item" href="/additional-information/changelog.html">Changelog</a>
                      
                      
                      
                      
            
              
                      
                      
            
              
                      
                      
            
              
                      
                      
            
              
                
                      <a class="item" href="/additional-information/developing.html">Development Info</a>
                      
                      
                      
                      
            
              
                      
                      
            
              
                      
                      
    </div>
    <div class="items">
      <div class="icon item header">
        <i class="fa fa-external-link"></i>EXTERNAL LINKS
      </div>
      <a class="item" href="https://cloud.google.com/community/tutorials/developing-services-with-k8s">Telepresence on GKE</a>
      <a class="item" href="https://www.datawire.io/guide/deployment/development-environments-microservices/">Microservice development environments</a>
    </div>
</nav>

    </div>

    <div class="eight columns page-content">
        <header class="post-header">
            <h2 class="post-title">Getting Started</h3>
        </header>

        <div class="post-content docs">
          <link rel="stylesheet" href="/css/mermaid.css" />

<script src="/js/mermaid.min.js"></script>

<script>mermaid.initialize({
   startOnLoad: true,
   cloneCssStyles: false,
 });
</script>

<p>You will need the following available on your machine:</p>

<ul>
  <li><code class="highlighter-rouge">kubectl</code> command line tool.</li>
  <li>Access to your Kubernetes cluster, with local credentials on your machine.
You can do this test by running <code class="highlighter-rouge">kubectl get pod</code> - if this works you’re all set.</li>
</ul>

<h4 id="os-x">OS X</h4>

<p>On OS X you can install Telepresence by running the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>brew cask install osxfuse
brew install datawire/blackbird/telepresence
</code></pre>
</div>

<h4 id="ubuntu-1604-or-later">Ubuntu 16.04 or later</h4>

<p>Run the following to install Telepresence:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>curl -s https://packagecloud.io/install/repositories/datawireio/telepresence/script.deb.sh | sudo bash
sudo apt install --no-install-recommends telepresence
</code></pre>
</div>

<h4 id="fedora-25">Fedora 25</h4>

<p>Run the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>curl -s https://packagecloud.io/install/repositories/datawireio/telepresence/script.rpm.sh | sudo bash
sudo dnf install telepresence
</code></pre>
</div>

<h4 id="windows">Windows</h4>

<p>If you are running Windows 10 Creators Edition (released April 2017), you have access to the Windows Subsystem for Linux.
This allows you to run Linux programs transparently inside Windows, with access to the normal Windows filesystem.
Some older versions of Windows also had WSL, but those were based off Ubuntu 14.04 and will not work with Telepresence.</p>

<p>To run Telepresence inside WSL:</p>

<ol>
  <li>Install <a href="https://msdn.microsoft.com/en-us/commandline/wsl/install_guide">Windows Subsystem for Linux</a>.</li>
  <li>Start the BASH.exe program.</li>
  <li>Install Telepresence by following the Ubuntu instructions above.</li>
</ol>

<p>Caveats:</p>

<ul>
  <li>At the moment volumes are not supported on Windows, but <a href="https://github.com/datawire/telepresence/issues/115">we plan on fixing this</a>.</li>
  <li>Network proxying won’t affect Windows binaries.
You can however edit your files in Windows and compile Java or .NET packages, and then run them with the Linux interpreters or VMs.</li>
</ul>

<h4 id="other-platforms">Other platforms</h4>

<p>Don’t see your favorite platform?
<a href="https://github.com/datawire/telepresence/issues/new">Let us know</a> and we’ll try to add it.</p>

<h3 id="proxying-from-your-local-process-to-kubernetes">Proxying from your local process to Kubernetes</h3>

<p>We’ll start out by using Telepresence with a newly created Kubernetes <code class="highlighter-rouge">Deployment</code>, just so it’s clearer what is going on.
In the next section we’ll discuss using Telepresence with an existing <code class="highlighter-rouge">Deployment</code> - you can <a href="#using-existing-deployments">skip ahead</a> if you want.</p>

<p>To get started we’ll use <code class="highlighter-rouge">telepresence --new-deployment quickstart</code> to create a new <code class="highlighter-rouge">Deployment</code> and matching <code class="highlighter-rouge">Service</code>.
The client will connect to the remote Kubernetes cluster via that <code class="highlighter-rouge">Deployment</code>.
You’ll then use the <code class="highlighter-rouge">--run-shell</code> argument to start a shell that is proxied to the remote Kubernetes cluster.</p>

<p>Let’s start a <code class="highlighter-rouge">Service</code> and <code class="highlighter-rouge">Deployment</code> in Kubernetes, and wait until it’s up and running.
We’ll check the current Kubernetes context and then start a new pod:</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">host$ </span><span class="nc">kubectl</span><span class="kv"> config current-context
</span>yourcluster
<span class="w">host$ </span><span class="nc">kubectl</span><span class="kv"> run --expose helloworld --image=nginx:alpine --port=80
</span><span class="ni"># </span><span class="nc">...</span><span class="kv"> wait 30 seconds, make sure pod is in Running state:
</span><span class="w">host$ </span><span class="nc">kubectl</span><span class="kv"> get pod --selector=run=helloworld
</span>NAME                          READY     STATUS    RESTARTS   AGE
helloworld-1333052153-63kkw   1/1       Running   0          33s
</code></pre>
</div>

<p>The local process you will run via <code class="highlighter-rouge">telepresence</code> will get environment variables that match those in the remote deployment, including Kubernetes <code class="highlighter-rouge">Service</code> addresses.
It will be able to access these addresses inside Kubernetes, as well as use Kubernetes custom DNS records for <code class="highlighter-rouge">Service</code> instances.</p>

<p>Note that starting <code class="highlighter-rouge">telepresence</code> the first time may take a little while, since Kubernetes needs to download the server-side image.</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">host$ </span><span class="nc">telepresence</span><span class="kv"> --new-deployment quickstart --run-shell
</span><span class="w">@yourcluster|host$ </span><span class="nc">env</span><span class="kv"> | grep HELLOWORLD_SERVICE
</span>HELLOWORLD_SERVICE_HOST=10.0.0.3
HELLOWORLD_SERVICE_PORT=443
<span class="w">@yourcluster|host$ </span><span class="nc">curl</span><span class="kv"> "http://${HELLOWORLD_SERVICE_HOST}:${HELLOWORLD_SERVICE_PORT}/"
</span>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
...
<span class="w">@yourcluster|host$ </span><span class="nc">curl</span><span class="kv"> "http://helloworld:${HELLOWORLD_SERVICE_PORT}/"
</span>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
...
<span class="w">@yourcluster|host$ </span><span class="nc">exit</span><span class="kv">
</span></code></pre>
</div>

<blockquote>
  <p><strong>Having trouble?</strong> Ask us a question in our <a href="https://gitter.im/datawire/telepresence">Gitter chatroom</a>.</p>
</blockquote>

<h3 id="proxying-from-kubernetes-to-your-local-process">Proxying from Kubernetes to your local process</h3>

<p>So far you’ve seen how local processes can access the remote Kubernetes cluster’s services.</p>

<p>You can also run a local server that listens on port 8080 and it will be exposed and available inside the Kubernetes cluster.
Just pass <code class="highlighter-rouge">--expose 8080</code> to Telepresence so it knows it needs to expose that port to the Kubernetes cluster:</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">host$ </span><span class="nc">echo</span><span class="kv"> "hello world" &gt; file.txt
</span><span class="w">host$ </span><span class="nc">telepresence</span><span class="kv"> --new-deployment quickstart --expose 8080 --run-shell
</span><span class="w">@yourcluster|host$ </span><span class="nc">ls</span><span class="kv">
</span>file.txt
<span class="w">@yourcluster|host$ </span><span class="nc">python2</span><span class="kv"> -m SimpleHTTPServer 8080
</span>Serving HTTP on 0.0.0.0 port 8080 ...
</code></pre>
</div>

<p>If you only have Python 3 on your computer you can instead do:</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">@yourcluster|host$ </span><span class="nc">python3</span><span class="kv"> -m http.server 8080
</span></code></pre>
</div>

<p>If you leave the <code class="highlighter-rouge">telepresence</code> process running your code will be accessible from inside the Kubernetes cluster:</p>

<div class="mermaid">
graph TD
  subgraph Laptop
    code["python HTTP server on port 8080"]---client[Telepresence client]
  end
  subgraph Kubernetes in Cloud
    client-.-proxy["k8s.Pod: Telepresence proxy, listening on port 8080"]
  end
</div>

<p>Let’s send a request to the remote pod to demonstrate that.
In a different terminal we can run a pod on the Kubernetes cluster and see that it can access the code running on your personal computer, via the Telepresence-created <code class="highlighter-rouge">Service</code> named <code class="highlighter-rouge">quickstart</code>:</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">$ </span><span class="nc">kubectl</span><span class="kv"> run --attach -i -t test --generator=job/v1 --rm \
</span>          --image=busybox --restart Never --command /bin/sh
<span class="ni">k8s-pod# </span><span class="nc">wget</span><span class="kv"> -qO- http://quickstart.default.svc.cluster.local:8080/file.txt
</span>hello world
</code></pre>
</div>


          <div><strong>Still have questions? Ask in our <a href="https://gitter.im/datawire/ambassador">Gitter chatroom</a> or <a href="https://github.com/datawire/ambassador/issues/new">file an issue on GitHub</a>.</strong></div>
        </div>
    </div>

    <div id="contents" class="two columns">
        <div data-kui-sticky></div>
    </div>
</div>

          </div>
      </div>

      <div class="grid">
  <div class="row">
    <footer class="basic menu top border">
      <div class="fluid">
        <span class="right header item">Copyright &copy; 2017 <a href="https://datawire.io">Datawire.io</a></span>
      </div>
    </footer>
  </div>
</div>
<script src="/js/sticky.min.js"></script>


      <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85887707-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
