#!/usr/bin/env bash
set -o pipefail

n=0
check_url() {
	n=$((n+1))
	if ! type docker >& /dev/null; then
		echo "ok $n $1 # SKIP docker not installed"
		return
	fi
	if curl -ik "$1" 2>&1 | sed 's/^/# /'; then
		echo "ok $n $1"
	else
		echo "not ok $n $1"
	fi
}

echo 'TAP version 13'
echo 1..3
check_url https://ambassador.standalone.svc.cluster.local/
check_url https://ambassador.default.svc.cluster.local/
check_url https://ambassador.localdev.svc.cluster.local/
